<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>block-open</title>
  <link rel="stylesheet" href="../pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>block-open</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <p>Opens a web browser for block documentation</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <h2>Usage</h2>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">function</span> suggested <span class="o">{</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>opens <code>docs/index.html</code> in the current directory</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  block open</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>opens <code>$BLOCK_PATH/doge-block/docs/index.html</code></p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  block open doge-block
<span class="o">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <h2>Main</h2>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">function</span> main <span class="o">{</span>
  <span class="nb">local</span> <span class="nv">shome</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">_block_home</span><span class="k">:-</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">cd</span> -P -- <span class="s2">&quot;</span><span class="si">${</span><span class="nv">BASH_SOURCE</span><span class="p">%/*</span><span class="si">}</span><span class="s2">/..&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> -P<span class="k">)</span><span class="s2">&quot;</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$shome</span><span class="s2">/script/profile&quot;</span> <span class="s1">&#39;&#39;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <p>If no locations on the command-line, default to the current directory</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="k">if</span> <span class="o">[[</span> -z <span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">set</span> -- .
  <span class="k">fi</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>Keep track of locations without documentation</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="nb">local</span> <span class="nv">not_found</span><span class="o">=</span>

  <span class="nb">local</span> pth_block</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <h3>For each block or path location:</h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="k">for</span> pth_block in <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span><span class="p">;</span> <span class="k">do</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <p>Find documentation and then continue the loop</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$pth_block</span><span class="s2">&quot;</span> in</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <p>If path starts with <code>/</code> or <code>.</code>, check for <code>docs/index.html</code> directly</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>      .*<span class="p">|</span>/*<span class="o">)</span>
        <span class="k">if</span> <span class="o">[[</span> -f <span class="s2">&quot;</span><span class="nv">$pth_block</span><span class="s2">/docs/index.html&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
          open <span class="s2">&quot;</span><span class="nv">$pth_block</span><span class="s2">/docs/index.html&quot;</span>
          <span class="k">continue</span>
        <span class="k">fi</span>
        <span class="p">;;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      <p>Otherwise, qualify with <code>$BLOCK_PATH</code></p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>      *<span class="o">)</span>
        <span class="k">if</span> <span class="o">[[</span> -f <span class="s2">&quot;</span><span class="nv">$BLOCK_PATH</span><span class="s2">/</span><span class="nv">$pth_block</span><span class="s2">/docs/index.html&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
          open <span class="s2">&quot;</span><span class="nv">$BLOCK_PATH</span><span class="s2">/</span><span class="nv">$pth_block</span><span class="s2">/docs/index.html&quot;</span>
          <span class="k">continue</span>
        <span class="k">fi</span>
        <span class="p">;;</span>
    <span class="k">esac</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <p>Record that documentation was not found for this location</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nv">not_found</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$not_found</span><span class="s2"> </span><span class="nv">$pth_block</span><span class="s2">&quot;</span>
  <span class="k">done</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      <h3>Finished processing locations</h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <p>Display which locations didn't have documentation</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>  <span class="k">if</span> <span class="o">[[</span> -n <span class="s2">&quot;</span><span class="nv">$not_found</span><span class="s2">&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;ERROR: couldn&#39;t find a docs/index.html in: </span><span class="nv">$@</span><span class="s2">&quot;</span> 1&gt;<span class="p">&amp;</span>2
    <span class="k">return</span> 1
  <span class="k">fi</span>
<span class="o">}</span>

<span class="nb">source</span> sub <span class="s2">&quot;</span><span class="nv">$0</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
